{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const apiKey = '45999578-eb7202f1a65d28d69ebdccc58';\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n\n        return {\n            images: data.hits,\n            totalHits: data.totalHits\n        };\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import iziToast from 'izitoast'; \n\nexport function renderImages(images, galleryElement) {\n    if (!images || images.length === 0) {\n        iziToast.warning({\n            title: 'No results',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            timeout: 5000,\n        });\n        return;\n    }\n  \n    const markup = images.map(image => {\n      return `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"152\" />\n          </a>\n          <div class=\"gallery-item-info\">\n            <p class=\"stats\"><b>Likes</b> ${image.likes}</p>\n            <p class=\"stats\"><b>Views</b> ${image.views}</p>\n            <p class=\"stats\"><b>Comments</b> ${image.comments}</p>\n            <p class=\"stats\"><b>Downloads</b> ${image.downloads}</p>\n          </div>\n        </li>\n      `;\n    }).join(''); \n  \n    galleryElement.insertAdjacentHTML('beforeend', markup); \n}\n\nexport function clearGallery(galleryElement) {\n    galleryElement.innerHTML = ''; \n}\n\nexport function showEndOfResultsMessage() {\n    iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 5000,\n    });\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showEndOfResultsMessage } from './js/render-functions.js';\n\nlet lightbox = new SimpleLightbox('.gallery-list a', {});\nlet currentQuery = ''; \nlet page = 1; \nconst perPage = 15; \n\nconst searchForm = document.getElementById('search-form');\nconst galleryList = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\n\nsearchForm.addEventListener('submit', function(event) {\n    event.preventDefault();\n  \n    const searchInput = document.getElementById('search-input').value.trim();\n  \n    if (!searchInput) {\n        iziToast.error({ message: 'Please enter a search word.' });\n        return;\n    }\n\n    currentQuery = searchInput;\n    page = 1;\n    clearGallery(galleryList);\n    loadImages(); \n});\n\nasync function loadImages() {\n    loader.style.display = 'block'; \n    loadMoreButton.style.display = 'none'; \n\n    try {\n        const { images, totalHits } = await fetchImages(currentQuery, page, perPage); \n\n        if (images.length === 0 && page === 1) {\n            iziToast.warning({\n                title: 'No results',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 5000,\n            });\n            loader.style.display = 'none';\n            return;\n        }\n\n        renderImages(images, galleryList);\n        lightbox.refresh();\n\n        const galleryItem = document.querySelector('.gallery-item');\n        const cardHeight = galleryItem ? galleryItem.getBoundingClientRect().height : 0;\n        \n        const totalLoaded = (page - 1) * perPage + images.length; \n\n        if (totalLoaded >= totalHits) {\n            loadMoreButton.style.display = 'none';\n            showEndOfResultsMessage(); \n        } else {\n            loadMoreButton.style.display = 'block'; \n        }\n\n        loader.style.display = 'none'; \n\n        if (cardHeight > 0) {\n            window.scrollBy({\n                top: 2 * cardHeight, \n                behavior: 'smooth' \n            });\n        }\n\n        page += 1; \n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n            timeout: 5000,\n        });\n        loader.style.display = 'none'; \n    }\n}\n"],"names":["fetchImages","query","page","perPage","url","response","axios","data","error","renderImages","images","galleryElement","iziToast","markup","image","clearGallery","showEndOfResultsMessage","lightbox","SimpleLightbox","currentQuery","searchForm","galleryList","loadMoreButton","loader","event","searchInput","loadImages","totalHits","galleryItem","cardHeight"],"mappings":"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"}