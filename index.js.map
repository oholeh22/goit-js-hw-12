{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showEndOfResultsMessage } from './js/render-functions.js';\n\nlet lightbox = new SimpleLightbox('.gallery-list a', {});\nlet currentQuery = ''; \nlet page = 1; \nconst perPage = 15; \n\nconst searchForm = document.getElementById('search-form');\nconst galleryList = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\n\nasync function loadImages() {\n    loader.style.display = 'block'; \n    loadMoreButton.style.display = 'none'; \n\n    try {\n        const { images, totalHits } = await fetchImages(currentQuery, page, perPage); \n\n        if (images.length === 0 && page === 1) {\n            iziToast.warning({\n                title: 'No results',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 5000,\n            });\n            loader.style.display = 'none';\n            return;\n        }\n\n        renderImages(images, galleryList);\n        lightbox.refresh();\n\n        const galleryItem = document.querySelector('.gallery-item');\n        const cardHeight = galleryItem ? galleryItem.getBoundingClientRect().height : 0;\n        \n        const totalLoaded = (page - 1) * perPage + images.length; \n\n        if (totalLoaded >= totalHits) {\n            loadMoreButton.style.display = 'none';\n            showEndOfResultsMessage(); \n        } else {\n            loadMoreButton.style.display = 'block'; \n        }\n\n        loader.style.display = 'none'; \n\n        if (cardHeight > 0) {\n            window.scrollBy({\n                top: 2 * cardHeight, \n                behavior: 'smooth' \n            });\n        }\n\n        page += 1; \n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n            timeout: 5000,\n        });\n        loader.style.display = 'none';\n    }\n}\n"],"names":["SimpleLightbox"],"mappings":"svBAOe,IAAIA,EAAe,kBAAmB,EAAE,EAKpC,SAAS,eAAe,aAAa,EACpC,SAAS,eAAe,SAAS,EAC9B,SAAS,eAAe,WAAW,EAC3C,SAAS,eAAe,QAAQ"}